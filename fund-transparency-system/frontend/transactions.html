<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Government Transactions - Fund Transparency Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            /* Light Mode Colors */
            --primary-blue: #1e40af;
            --primary-light: #3b82f6;
            --accent-gold: #f59e0b;
            --success-green: #10b981;
            --warning-orange: #f97316;
            --danger-red: #ef4444;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --border-light: #e5e7eb;
            --hero-bg: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            --card-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --card-shadow-hover: 0 20px 25px -5px rgb(0 0 0 / 0.1);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        /* Dark Mode Colors */
        body.dark {
            --primary-blue: #3b82f6;
            --primary-light: #60a5fa;
            --accent-gold: #fbbf24;
            --success-green: #34d399;
            --text-dark: #f9fafb;
            --text-light: #d1d5db;
            --bg-light: #0f172a;
            --bg-white: #1e293b;
            --border-light: #334155;
            --hero-bg: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            --card-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
            --card-shadow-hover: 0 20px 25px -5px rgb(0 0 0 / 0.4);
            --glass-bg: rgba(30, 41, 59, 0.3);
            --glass-border: rgba(100, 116, 139, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: var(--bg-light);
            transition: background-color 0.3s ease, color 0.3s ease;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        /* Enhanced Header */
        .header {
            background: var(--bg-white);
            backdrop-filter: blur(20px);
            box-shadow: var(--card-shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--border-light);
            transition: all 0.3s ease;
        }

        .header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            text-decoration: none;
        }

        .logo-icon {
            font-size: 2.5rem;
            filter: drop-shadow(0 4px 8px rgba(30, 64, 175, 0.3));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }

        .logo-text h1 {
            font-size: clamp(1.25rem, 3vw, 1.75rem);
            font-weight: 800;
            color: var(--primary-blue);
            line-height: 1.2;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-light));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo-text span {
            font-size: clamp(0.75rem, 2vw, 0.875rem);
            color: var(--text-light);
            font-weight: 500;
        }

        .nav {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .nav-link {
            color: var(--text-dark);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 0;
            position: relative;
            transition: color 0.2s ease;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--primary-blue);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-blue), var(--accent-gold));
            transition: width 0.3s ease;
        }

        .nav-link:hover::after,
        .nav-link.active::after {
            width: 100%;
        }

        /* Theme Toggle */
        .theme-toggle {
            background: var(--bg-light);
            border: 2px solid var(--border-light);
            color: var(--text-dark);
            padding: 0.75rem;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.25rem;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin-left: 1rem;
            position: relative;
            overflow: hidden;
        }

        .theme-toggle::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-gold));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.1) rotate(15deg);
            border-color: var(--primary-blue);
        }

        .theme-toggle:hover::before {
            opacity: 1;
        }

        .theme-toggle:hover {
            color: white;
        }

        .theme-toggle span {
            position: relative;
            z-index: 1;
        }

        /* Hero Section */
        .hero {
            background: var(--hero-bg);
            color: white;
            padding: 4rem 0;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><radialGradient id="a" cx="50%" cy="50%"><stop offset="0%" stop-color="rgba(255,255,255,0.1)"/><stop offset="100%" stop-color="rgba(255,255,255,0)"/></radialGradient></defs><circle cx="25" cy="10" r="15" fill="url(%23a)"/><circle cx="75" cy="10" r="10" fill="url(%23a)"/></svg>') repeat;
            opacity: 0.1;
            animation: backgroundFloat 25s ease-in-out infinite;
        }

        @keyframes backgroundFloat {
            0%, 100% { transform: translateY(0px) translateX(0px); }
            50% { transform: translateY(-20px) translateX(10px); }
        }

        .hero .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .hero-content h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            margin-bottom: 1rem;
            line-height: 1.1;
            background: linear-gradient(135deg, #ffffff, #e2e8f0);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-subtitle {
            font-size: clamp(1rem, 2.5vw, 1.125rem);
            opacity: 0.9;
            margin-bottom: 2rem;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            opacity: 0.8;
        }

        .breadcrumb a {
            color: white;
            text-decoration: none;
            transition: opacity 0.2s ease;
        }

        .breadcrumb a:hover {
            opacity: 0.7;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            min-width: 400px;
        }

        .hero-stat {
            text-align: center;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            padding: 1.5rem;
            border-radius: 16px;
            border: 1px solid var(--glass-border);
        }

        .hero-stat-value {
            font-size: clamp(1.5rem, 3vw, 2rem);
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .hero-stat-label {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        /* Main Content */
        .main-content {
            padding: 4rem 0;
        }

        /* Overview Stats */
        .overview-section {
            margin-bottom: 4rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: var(--bg-white);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-light);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-blue), var(--accent-gold));
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--card-shadow-hover);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .stat-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-icon {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-gold));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-value {
            font-size: clamp(2rem, 4vw, 2.5rem);
            font-weight: 800;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
            line-height: 1;
        }

        .stat-description {
            font-size: 0.875rem;
            color: var(--text-light);
        }

        /* Charts Section */
        .charts-section {
            margin-bottom: 4rem;
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-header h2 {
            font-size: clamp(2rem, 4vw, 2.5rem);
            font-weight: 800;
            color: var(--text-dark);
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-light));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .section-header p {
            color: var(--text-light);
            font-size: 1.125rem;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 3rem;
        }

        .chart-card {
            background: var(--bg-white);
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-light);
            transition: all 0.3s ease;
        }

        .chart-card:hover {
            box-shadow: var(--card-shadow-hover);
        }

        .chart-header {
            margin-bottom: 2rem;
        }

        .chart-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .chart-subtitle {
            color: var(--text-light);
            font-size: 0.875rem;
        }

        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }

        /* Filters Section */
        .filters-section {
            background: var(--bg-white);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-light);
            margin-bottom: 3rem;
        }

        .filters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .filters-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-dark);
        }

        .view-toggle {
            display: flex;
            background: var(--bg-light);
            border-radius: 12px;
            padding: 0.25rem;
        }

        .toggle-btn {
            padding: 0.5rem 1rem;
            border: none;
            background: none;
            cursor: pointer;
            border-radius: 10px;
            font-weight: 500;
            transition: all 0.2s ease;
            color: var(--text-light);
        }

        .toggle-btn.active {
            background: var(--primary-blue);
            color: white;
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            align-items: end;
        }

        .filter-group {
            position: relative;
        }

        .filter-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .filter-input,
        .filter-select {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border-light);
            border-radius: 12px;
            background: var(--bg-white);
            color: var(--text-dark);
            font-size: 0.875rem;
            transition: all 0.3s ease;
        }

        .filter-input:focus,
        .filter-select:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
        }

        .search-container {
            position: relative;
        }

        .search-container::before {
            content: '🔍';
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1rem;
            z-index: 1;
        }

        .search-input {
            padding-left: 3rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-light));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(30, 64, 175, 0.3);
        }

        /* Transactions Grid */
        .transactions-section {
            margin-bottom: 4rem;
        }

        .transactions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 2rem;
        }

        .transaction-card {
            background: var(--bg-white);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-light);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .transaction-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, var(--success-green), var(--primary-blue));
        }

        .transaction-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--card-shadow-hover);
        }

        .transaction-header {
            margin-bottom: 1.5rem;
        }

        .transaction-id {
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.75rem;
            color: var(--text-light);
            background: var(--bg-light);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            margin-bottom: 1rem;
            display: inline-block;
        }

        .transaction-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .transaction-amount {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--success-green);
            margin-bottom: 1rem;
        }

        .department-flow {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: var(--bg-light);
            border-radius: 12px;
        }

        .department {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        .arrow {
            color: var(--primary-blue);
            font-size: 1.25rem;
        }

        .transaction-details {
            margin-bottom: 1.5rem;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-light);
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-size: 0.875rem;
            color: var(--text-light);
            font-weight: 500;
        }

        .detail-value {
            font-size: 0.875rem;
            color: var(--text-dark);
            font-weight: 600;
        }

        .transaction-description {
            color: var(--text-light);
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .transaction-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-light);
        }

        .status-badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-approved {
            background: #d1fae5;
            color: #065f46;
        }

        .status-flagged {
            background: #fee2e2;
            color: #991b1b;
        }

        .interaction-stats {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.75rem;
            color: var(--text-light);
            background: var(--bg-light);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
        }

        /* Table View */
        .table-container {
            background: var(--bg-white);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-light);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th,
        .data-table td {
            padding: 1.5rem;
            text-align: left;
            border-bottom: 1px solid var(--border-light);
        }

        .data-table th {
            background: var(--bg-light);
            font-weight: 700;
            color: var(--text-dark);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .data-table tbody tr:hover {
            background: var(--bg-light);
        }

        /* Loading & Empty States */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4rem;
            color: var(--text-light);
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--border-light);
            border-top: 4px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .empty-state {
            text-align: center;
            padding: 4rem;
            color: var(--text-light);
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 3rem;
        }

        .pagination-btn {
            padding: 0.75rem 1rem;
            border: 2px solid var(--border-light);
            background: var(--bg-white);
            color: var(--text-dark);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .pagination-btn:hover,
        .pagination-btn.active {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }

            .hero-stats {
                min-width: auto;
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .hero .container {
                flex-direction: column;
                gap: 2rem;
                text-align: center;
            }

            .hero-stats {
                grid-template-columns: 1fr;
                width: 100%;
            }

            .nav {
                gap: 1rem;
            }

            .theme-toggle {
                margin-left: 0.5rem;
                width: 45px;
                height: 45px;
            }

            .filters-grid {
                grid-template-columns: 1fr;
            }

            .transactions-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .chart-container {
                height: 300px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 1rem;
            }

            .main-content {
                padding: 2rem 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .hero-stats {
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <a href="index.html" class="logo">
                <div class="logo-icon">💰</div>
                <div class="logo-text">
                    <h1>Government Transactions</h1>
                    <span>Transparency Portal</span>
                </div>
            </a>
            <nav class="nav">
                <a href="index.html" class="nav-link">Home</a>
                <a href="transactions.html" class="nav-link active">Transactions</a>
                <a href="about.html" class="nav-link">About</a>
                <a href="auth.html" class="nav-link">Sign In</a>
                <button class="theme-toggle" id="themeToggle" title="Toggle Dark Mode">
                    <span id="themeIcon">🌙</span>
                </button>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="breadcrumb">
                    <a href="index.html">Home</a>
                    <span>→</span>
                    <span>Government Transactions</span>
                </div>
                <h1>Government Fund Transactions</h1>
                <p class="hero-subtitle">Complete transparency in government spending with real-time transaction tracking and department-wise analytics</p>
            </div>
            <div class="hero-stats">
                <div class="hero-stat">
                    <div class="hero-stat-value" id="heroTotalTransactions">1,234</div>
                    <div class="hero-stat-label">Total Transactions</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-value" id="heroTotalAmount">₹250Cr</div>
                    <div class="hero-stat-label">Total Amount</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-value" id="heroDepartments">8</div>
                    <div class="hero-stat-label">Departments</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Overview Statistics -->
            <section class="overview-section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-title">Active Transactions</span>
                            <span class="stat-icon">📊</span>
                        </div>
                        <div class="stat-value" id="totalTransactions">Loading...</div>
                        <div class="stat-description">Currently processing</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-title">Total Funds</span>
                            <span class="stat-icon">💵</span>
                        </div>
                        <div class="stat-value" id="totalFunds">Loading...</div>
                        <div class="stat-description">Allocated this year</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-title">Approved</span>
                            <span class="stat-icon">✅</span>
                        </div>
                        <div class="stat-value" id="approvedTransactions">Loading...</div>
                        <div class="stat-description">Public verified</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-title">Departments</span>
                            <span class="stat-icon">🏢</span>
                        </div>
                        <div class="stat-value" id="activeDepartments">Loading...</div>
                        <div class="stat-description">Active departments</div>
                    </div>
                </div>
            </section>

            <!-- Charts Section -->
            <section class="charts-section">
                <div class="section-header">
                    <h2>Department-wise Analytics</h2>
                    <p>Comprehensive analysis of government spending across all departments</p>
                </div>
                
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Transactions by Department</h3>
                            <p class="chart-subtitle">Number of transactions per department</p>
                        </div>
                        <div class="chart-container">
                            <canvas id="departmentTransactionsChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Funding Distribution</h3>
                            <p class="chart-subtitle">Amount allocated per department</p>
                        </div>
                        <div class="chart-container">
                            <canvas id="departmentFundingChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Transaction Status Overview</h3>
                            <p class="chart-subtitle">Current status distribution</p>
                        </div>
                        <div class="chart-container">
                            <canvas id="statusChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Monthly Transaction Trends</h3>
                            <p class="chart-subtitle">Transaction volume over time</p>
                        </div>
                        <div class="chart-container">
                            <canvas id="trendsChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Filters Section -->
            <section class="filters-section">
                <div class="filters-header">
                    <h3 class="filters-title">Filter & Search Transactions</h3>
                    <div class="view-toggle">
                        <button class="toggle-btn active" id="gridViewBtn" onclick="switchView('grid')">Grid View</button>
                        <button class="toggle-btn" id="tableViewBtn" onclick="switchView('table')">Table View</button>
                    </div>
                </div>
                
                <div class="filters-grid">
                    <div class="filter-group search-container">
                        <label class="filter-label">Search Transactions</label>
                        <input type="text" class="filter-input search-input" id="searchInput" placeholder="Search by title, department, or ID...">
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">Department</label>
                        <select class="filter-select" id="departmentFilter">
                            <option value="">All Departments</option>
                            <option value="Education">Education</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="Infrastructure">Infrastructure</option>
                            <option value="Defense">Defense</option>
                            <option value="Agriculture">Agriculture</option>
                            <option value="Technology">Technology</option>
                            <option value="Social Welfare">Social Welfare</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">Status</label>
                        <select class="filter-select" id="statusFilter">
                            <option value="">All Status</option>
                            <option value="pending">Pending</option>
                            <option value="approved">Approved</option>
                            <option value="flagged">Flagged</option>
                            <option value="rejected">Rejected</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">Amount Range</label>
                        <select class="filter-select" id="amountFilter">
                            <option value="">All Amounts</option>
                            <option value="0-100000">Under ₹1L</option>
                            <option value="100000-1000000">₹1L - ₹10L</option>
                            <option value="1000000-10000000">₹10L - ₹1Cr</option>
                            <option value="10000000+">Above ₹1Cr</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">&nbsp;</label>
                        <button class="btn btn-primary" onclick="applyFilters()">
                            <span>🔍</span>
                            Apply Filters
                        </button>
                    </div>
                </div>
            </section>

            <!-- Transactions Section -->
            <section class="transactions-section">
                <div id="gridView" class="transactions-grid">
                    <div class="loading">
                        <div class="loading-spinner"></div>
                        <p>Loading government transactions...</p>
                    </div>
                </div>
                
                <div id="tableView" class="table-container" style="display: none;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Transaction ID</th>
                                <th>Title</th>
                                <th>Amount</th>
                                <th>Department</th>
                                <th>Status</th>
                                <th>Date</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Table content will be populated here -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination" id="pagination" style="display: none;">
                    <button class="pagination-btn" onclick="previousPage()">← Previous</button>
                    <span class="pagination-info" id="pageInfo">Page 1 of 1</span>
                    <button class="pagination-btn" onclick="nextPage()">Next →</button>
                </div>
            </section>
        </div>
    </main>

    <script>
        // Global Variables
        const API_BASE = '/api';
        let allTransactions = [];
        let filteredTransactions = [];
        let currentView = 'grid';
        let currentPage = 1;
        let itemsPerPage = 12;
        let charts = {};

        // Currency Formatter
        function formatCurrency(amount) {
            const numAmount = parseFloat(amount) || 0;
            
            if (numAmount >= 10000000) {
                return `₹${(numAmount / 10000000).toFixed(1)}Cr`;
            } else if (numAmount >= 100000) {
                return `₹${(numAmount / 100000).toFixed(1)}L`;
            } else if (numAmount >= 1000) {
                return `₹${(numAmount / 1000).toFixed(1)}K`;
            } else {
                return `₹${numAmount.toLocaleString('en-IN')}`;
            }
        }

        // Theme Management
        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = savedTheme || (prefersDark ? 'dark' : 'light');
            
            if (theme === 'dark') {
                document.body.classList.add('dark');
                updateThemeToggle(true);
            }
        }

        function toggleTheme() {
            const isDark = document.body.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            updateThemeToggle(isDark);
            
            // Update chart themes
            Object.values(charts).forEach(chart => {
                if (chart) {
                    chart.options.plugins.legend.labels.color = isDark ? '#d1d5db' : '#6b7280';
                    chart.options.scales.x.ticks.color = isDark ? '#d1d5db' : '#6b7280';
                    chart.options.scales.y.ticks.color = isDark ? '#d1d5db' : '#6b7280';
                    chart.update();
                }
            });
        }

        function updateThemeToggle(isDark) {
            const themeIcon = document.getElementById('themeIcon');
            themeIcon.textContent = isDark ? '☀️' : '🌙';
        }

        // Load Transactions
        async function loadTransactions() {
            try {
                // Try to fetch from API
                const response = await fetch(`${API_BASE}/transactions`);
                const data = await response.json();
                
                if (data.success) {
                    allTransactions = data.data;
                } else {
                    throw new Error('API returned error');
                }
            } catch (error) {
                console.log('Using demo data');
                // Use demo data when API is not available
                allTransactions = generateDemoTransactions();
            }
            
            filteredTransactions = [...allTransactions];
            updateStatistics();
            createCharts();
            displayTransactions();
        }

        // Generate Demo Transactions
        function generateDemoTransactions() {
            const departments = ['Education', 'Healthcare', 'Infrastructure', 'Defense', 'Agriculture', 'Technology', 'Social Welfare'];
            const statuses = ['pending', 'approved', 'flagged'];
            const titles = [
                'School Infrastructure Development',
                'Healthcare Equipment Purchase',
                'Road Construction Project',
                'Defense Equipment Upgrade',
                'Agricultural Subsidy Program',
                'Digital Infrastructure Setup',
                'Social Welfare Scheme Implementation',
                'Hospital Construction Project',
                'Educational Technology Initiative',
                'Rural Development Program'
            ];

            const transactions = [];
            for (let i = 0; i < 50; i++) {
                const dept = departments[Math.floor(Math.random() * departments.length)];
                transactions.push({
                    _id: `demo_${i}`,
                    transactionId: `TXN${String(i + 1).padStart(6, '0')}`,
                    title: titles[Math.floor(Math.random() * titles.length)],
                    description: `Government fund allocation for ${dept.toLowerCase()} department initiatives and public welfare programs.`,
                    amount: Math.floor(Math.random() * 50000000) + 100000,
                    fromDepartment: dept,
                    toDepartment: departments[Math.floor(Math.random() * departments.length)],
                    category: dept,
                    status: statuses[Math.floor(Math.random() * statuses.length)],
                    createdAt: new Date(Date.now() - Math.floor(Math.random() * 90) * 24 * 60 * 60 * 1000).toISOString(),
                    createdBy: {
                        name: `${dept} Official`,
                        _id: `user_${i}`
                    },
                    approvals: Math.floor(Math.random() * 50),
                    flags: Math.floor(Math.random() * 10)
                });
            }
            return transactions;
        }

        // Update Statistics
        function updateStatistics() {
            const totalTransactions = allTransactions.length;
            const totalFunds = allTransactions.reduce((sum, t) => sum + (t.amount || 0), 0);
            const approvedCount = allTransactions.filter(t => t.status === 'approved').length;
            const departments = new Set(allTransactions.map(t => t.fromDepartment)).size;

            document.getElementById('totalTransactions').textContent = totalTransactions.toLocaleString();
            document.getElementById('totalFunds').textContent = formatCurrency(totalFunds);
            document.getElementById('approvedTransactions').textContent = approvedCount.toLocaleString();
            document.getElementById('activeDepartments').textContent = departments;

            // Update hero stats
            document.getElementById('heroTotalTransactions').textContent = totalTransactions.toLocaleString();
            document.getElementById('heroTotalAmount').textContent = formatCurrency(totalFunds);
            document.getElementById('heroDepartments').textContent = departments;
        }

        // Create Charts
        function createCharts() {
            createDepartmentTransactionsChart();
            createDepartmentFundingChart();
            createStatusChart();
            createTrendsChart();
        }

        function createDepartmentTransactionsChart() {
            const departmentCounts = {};
            allTransactions.forEach(t => {
                departmentCounts[t.fromDepartment] = (departmentCounts[t.fromDepartment] || 0) + 1;
            });

            const ctx = document.getElementById('departmentTransactionsChart').getContext('2d');
            charts.departmentTransactions = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(departmentCounts),
                    datasets: [{
                        label: 'Number of Transactions',
                        data: Object.values(departmentCounts),
                        backgroundColor: [
                            '#1e40af', '#3b82f6', '#f59e0b', '#10b981', 
                            '#f97316', '#ef4444', '#8b5cf6', '#06b6d4'
                        ],
                        borderRadius: 8,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        function createDepartmentFundingChart() {
            const departmentFunds = {};
            allTransactions.forEach(t => {
                departmentFunds[t.fromDepartment] = (departmentFunds[t.fromDepartment] || 0) + (t.amount || 0);
            });

            const ctx = document.getElementById('departmentFundingChart').getContext('2d');
            charts.departmentFunding = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(departmentFunds),
                    datasets: [{
                        data: Object.values(departmentFunds),
                        backgroundColor: [
                            '#1e40af', '#3b82f6', '#f59e0b', '#10b981', 
                            '#f97316', '#ef4444', '#8b5cf6', '#06b6d4'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + formatCurrency(context.raw);
                                }
                            }
                        }
                    }
                }
            });
        }

        function createStatusChart() {
            const statusCounts = {};
            allTransactions.forEach(t => {
                statusCounts[t.status] = (statusCounts[t.status] || 0) + 1;
            });

            const ctx = document.getElementById('statusChart').getContext('2d');
            charts.status = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: Object.keys(statusCounts).map(s => s.charAt(0).toUpperCase() + s.slice(1)),
                    datasets: [{
                        data: Object.values(statusCounts),
                        backgroundColor: ['#f59e0b', '#10b981', '#ef4444', '#6b7280'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function createTrendsChart() {
            const monthlyData = {};
            allTransactions.forEach(t => {
                const month = new Date(t.createdAt).toLocaleDateString('en-IN', { month: 'short' });
                monthlyData[month] = (monthlyData[month] || 0) + 1;
            });

            const ctx = document.getElementById('trendsChart').getContext('2d');
            charts.trends = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Object.keys(monthlyData),
                    datasets: [{
                        label: 'Transactions',
                        data: Object.values(monthlyData),
                        borderColor: '#1e40af',
                        backgroundColor: 'rgba(30, 64, 175, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // Display Transactions
        function displayTransactions() {
            if (currentView === 'grid') {
                displayGridView();
            } else {
                displayTableView();
            }
            updatePagination();
        }

        function displayGridView() {
            const container = document.getElementById('gridView');
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageTransactions = filteredTransactions.slice(startIndex, endIndex);

            if (pageTransactions.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">📭</div>
                        <h3>No Transactions Found</h3>
                        <p>Try adjusting your search or filter criteria</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = pageTransactions.map(transaction => `
                <div class="transaction-card">
                    <div class="transaction-header">
                        <div class="transaction-id">#${transaction.transactionId || transaction._id.substring(0, 8)}</div>
                        <h3 class="transaction-title">${transaction.title}</h3>
                        <div class="transaction-amount">${formatCurrency(transaction.amount)}</div>
                    </div>
                    
                    <div class="department-flow">
                        <span class="department">${transaction.fromDepartment}</span>
                        <span class="arrow">→</span>
                        <span class="department">${transaction.toDepartment}</span>
                    </div>
                    
                    <div class="transaction-details">
                        <div class="detail-row">
                            <span class="detail-label">Category</span>
                            <span class="detail-value">${transaction.category}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Created By</span>
                            <span class="detail-value">${transaction.createdBy?.name || 'Government Official'}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Date</span>
                            <span class="detail-value">${new Date(transaction.createdAt).toLocaleDateString('en-IN')}</span>
                        </div>
                    </div>
                    
                    <p class="transaction-description">${(transaction.description || '').substring(0, 120)}${(transaction.description || '').length > 120 ? '...' : ''}</p>
                    
                    <div class="transaction-footer">
                        <span class="status-badge status-${transaction.status}">${transaction.status.charAt(0).toUpperCase() + transaction.status.slice(1)}</span>
                        <div class="interaction-stats">
                            <div class="stat-item">
                                <span>👍</span>
                                <span>${transaction.approvals || 0}</span>
                            </div>
                            <div class="stat-item">
                                <span>🚩</span>
                                <span>${transaction.flags || 0}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function displayTableView() {
            const tbody = document.getElementById('tableBody');
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageTransactions = filteredTransactions.slice(startIndex, endIndex);

            if (pageTransactions.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 3rem;">
                            <div class="empty-state">
                                <div class="empty-icon">📭</div>
                                <h3>No Transactions Found</h3>
                                <p>Try adjusting your search or filter criteria</p>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = pageTransactions.map(transaction => `
                <tr>
                    <td>#${transaction.transactionId || transaction._id.substring(0, 8)}</td>
                    <td>
                        <strong>${transaction.title}</strong>
                        <br>
                        <small style="color: var(--text-light);">${(transaction.description || '').substring(0, 60)}...</small>
                    </td>
                    <td><strong style="color: var(--success-green);">${formatCurrency(transaction.amount)}</strong></td>
                    <td>${transaction.fromDepartment} → ${transaction.toDepartment}</td>
                    <td><span class="status-badge status-${transaction.status}">${transaction.status.charAt(0).toUpperCase() + transaction.status.slice(1)}</span></td>
                    <td>${new Date(transaction.createdAt).toLocaleDateString('en-IN')}</td>
                </tr>
            `).join('');
        }

        // View Toggle
        function switchView(view) {
            currentView = view;
            currentPage = 1;

            document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(view + 'ViewBtn').classList.add('active');

            if (view === 'grid') {
                document.getElementById('gridView').style.display = 'grid';
                document.getElementById('tableView').style.display = 'none';
            } else {
                document.getElementById('gridView').style.display = 'none';
                document.getElementById('tableView').style.display = 'block';
            }

            displayTransactions();
        }

        // Filters
        function applyFilters() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const department = document.getElementById('departmentFilter').value;
            const status = document.getElementById('statusFilter').value;
            const amountRange = document.getElementById('amountFilter').value;

            filteredTransactions = allTransactions.filter(transaction => {
                const matchesSearch = !search || 
                    transaction.title.toLowerCase().includes(search) ||
                    transaction.fromDepartment.toLowerCase().includes(search) ||
                    transaction.toDepartment.toLowerCase().includes(search) ||
                    (transaction.transactionId || '').toLowerCase().includes(search);

                const matchesDepartment = !department || 
                    transaction.fromDepartment === department || 
                    transaction.toDepartment === department;

                const matchesStatus = !status || transaction.status === status;

                let matchesAmount = true;
                if (amountRange) {
                    const amount = transaction.amount || 0;
                    if (amountRange === '0-100000') {
                        matchesAmount = amount <= 100000;
                    } else if (amountRange === '100000-1000000') {
                        matchesAmount = amount > 100000 && amount <= 1000000;
                    } else if (amountRange === '1000000-10000000') {
                        matchesAmount = amount > 1000000 && amount <= 10000000;
                    } else if (amountRange === '10000000+') {
                        matchesAmount = amount > 10000000;
                    }
                }

                return matchesSearch && matchesDepartment && matchesStatus && matchesAmount;
            });

            currentPage = 1;
            displayTransactions();
        }

        // Pagination
        function updatePagination() {
            const totalPages = Math.ceil(filteredTransactions.length / itemsPerPage);
            const pagination = document.getElementById('pagination');
            const pageInfo = document.getElementById('pageInfo');

            if (totalPages <= 1) {
                pagination.style.display = 'none';
            } else {
                pagination.style.display = 'flex';
                pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
            }
        }

        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                displayTransactions();
            }
        }

        function nextPage() {
            const totalPages = Math.ceil(filteredTransactions.length / itemsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                displayTransactions();
            }
        }

        // Initialize
        window.addEventListener('load', function() {
            initializeTheme();
            loadTransactions();
            
            // Event listeners
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            document.getElementById('searchInput').addEventListener('input', applyFilters);
            document.getElementById('departmentFilter').addEventListener('change', applyFilters);
            document.getElementById('statusFilter').addEventListener('change', applyFilters);
            document.getElementById('amountFilter').addEventListener('change', applyFilters);
        });
    </script>
</body>
</html>
